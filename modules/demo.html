<!-- ============================================
     MÓDULO: DEMO INTERACTIVA (ECO MÁSTER)
     Contenido: Simulación de Evaluación y Dashboard de Resultados
     Datos: Basados en Caso Real Grado 5° (Liceo Cuba)
============================================= -->

<section class="demo-header text-center">
    <div class="content-container">
        <h2>Motor de Inteligencia ECO</h2>
        <p>Experimente cómo transformamos datos subjetivos en planes de acción pedagógica concretos.</p>
        
        <!-- Selector de Escenario -->
        <div class="scenario-selector">
            <button class="scenario-btn active" onclick="switchScenario('g5')">Caso Real: Grado 5°</button>
            <button class="scenario-btn" onclick="switchScenario('g9')">Simulación: Grado 9°</button>
        </div>
    </div>
</section>

<!-- ================= VISTA GRADO 5 (DATOS REALES) ================= -->
<div id="g5-view" class="scenario-view fade-in">
    
    <!-- PASO 1: LA EVALUACIÓN (INPUT) -->
    <div class="demo-step">
        <div class="step-label">PASO 1: LA EVALUACIÓN</div>
        <h3>Batería Socioemocional (Periodo 1)</h3>
        <p class="mb-2"><strong>Competencia:</strong> Autonomía y Responsabilidad. <br><em>Pregunta real aplicada a los estudiantes:</em></p>
        
        <div class="likert-card">
            <p class="likert-question">1. Pienso en lo que puede pasar antes de tomar una decisión.</p>
            <div class="likert-options">
                <button class="l-opt">Nunca</button>
                <button class="l-opt">A veces</button>
                <button class="l-opt active">Muchas veces</button>
                <button class="l-opt">Siempre</button>
            </div>
        </div>
    </div>

    <!-- PASO 2: EL DIAGNÓSTICO (DASHBOARD) -->
    <div class="demo-step">
        <div class="step-label">PASO 2: LECTURA DE RESULTADOS</div>
        <div class="dashboard-grid">
            
            <!-- Gráfica -->
            <div class="chart-card">
                <h4>Distribución de Respuestas (30 Estudiantes)</h4>
                <div class="chart-wrapper">
                    <canvas id="chartG5"></canvas>
                </div>
            </div>

            <!-- Interpretación (Texto del PDF) -->
            <div class="insight-card alert-variant">
                <h4><i class="fa-solid fa-triangle-exclamation"></i> Diagnóstico ECO: Variante 3</h4>
                <p><strong>Nivel Global: Bajo Dominio (Alerta)</strong></p>
                <p>El grupo se ubica en una zona intermedia. Aunque el <strong>33.9%</strong> reflexiona "Muchas veces", la suma de "A veces" y "Nunca" (40.9%) revela inestabilidad.</p>
                <hr>
                <p class="small-text"><em>"Los estudiantes muestran comportamientos responsables en ciertas ocasiones, pero en otras optan por la evasión o la justificación."</em></p>
            </div>
        </div>
    </div>

    <!-- PASO 3: LA INTERVENCIÓN (SOLUCIÓN) -->
    <div class="demo-step">
        <div class="step-label">PASO 3: INTERVENCIÓN PEDAGÓGICA</div>
        <h3>Solución Recomendada por ECO Máster</h3>
        
        <div class="intervention-container">
            <!-- Taller Docente -->
            <div class="intervention-card doc">
                <div class="icon-header"><i class="fa-solid fa-chalkboard-user"></i> ECO DOCENTE</div>
                <h4>Taller: "Decisiones con Huella"</h4>
                <p><strong>Objetivo:</strong> Fortalecer la conciencia del impacto de sus decisiones, promoviendo que asuman responsabilidad.</p>
                <ul class="eco-list small-list">
                    <li>Dinámica: Lenguaje vivencial y práctico.</li>
                    <li>Producto: Acuerdos visibles en el aula.</li>
                </ul>
                <button class="btn-action">Ver Guía Didáctica</button>
            </div>

            <!-- Escuela de Padres -->
            <div class="intervention-card fam">
                <div class="icon-header"><i class="fa-solid fa-house-chimney-user"></i> ECO FAMILIAS</div>
                <h4>Charla: "Fomentar la autonomía en casa"</h4>
                <p><strong>Enfoque:</strong> Cómo pasar del castigo a la consecuencia lógica en el hogar.</p>
                <button class="btn-action outline">Ver Material de Apoyo</button>
            </div>
        </div>
    </div>

</div>

<!-- ================= VISTA GRADO 9 (SIMULACIÓN ESTRUCTURAL) ================= -->
<div id="g9-view" class="scenario-view fade-in" style="display:none;">
    <div class="content-container text-center">
        <div class="demo-step">
            <h3>Simulación Grado 9°: Proyecto de Vida</h3>
            <p>Estructura de evaluación enfocada en <strong>Resiliencia y Riesgos</strong> (Ciclo 4).</p>
            
            <div class="likert-card" style="border-left-color: var(--color-eco-violet);">
                <p class="likert-question">1. Identifico situaciones de riesgo que pueden afectar mi futuro.</p>
                <div class="likert-options">
                    <button class="l-opt">Nunca</button>
                    <button class="l-opt">A veces</button>
                    <button class="l-opt">Muchas veces</button>
                    <button class="l-opt">Siempre</button>
                </div>
            </div>

            <div class="alert-box" style="margin-top: 2rem; background: #e3f2fd; padding: 2rem; border-radius: 10px;">
                <h4><i class="fa-solid fa-info-circle"></i> Nota de la Demo</h4>
                <p>En la versión completa, aquí se desplegarían los datos específicos del grado 9° siguiendo la misma lógica rigurosa del caso de 5°.</p>
            </div>
        </div>
    </div>
</div>

<!-- ESTILOS ESPECÍFICOS -->
<style>
    .demo-header { padding: 2rem 0; background: white; }
    
    .scenario-selector {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        gap: 15px;
    }

    .scenario-btn {
        padding: 10px 25px;
        border: 2px solid var(--color-eco-violet);
        background: transparent;
        color: var(--color-eco-violet);
        border-radius: 30px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
    }

    .scenario-btn.active, .scenario-btn:hover {
        background: var(--color-eco-violet);
        color: white;
    }

    .demo-step {
        background: white;
        margin: 20px auto;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        max-width: 1000px;
        position: relative;
    }

    .step-label {
        position: absolute;
        top: -12px;
        left: 20px;
        background: var(--color-eco-teal);
        color: white;
        padding: 4px 15px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
        letter-spacing: 1px;
    }

    /* Likert UI */
    .likert-card {
        background: #f9f9f9;
        padding: 1.5rem;
        border-radius: 8px;
        border-left: 5px solid var(--color-eco-yellow);
        margin-top: 1rem;
    }

    .likert-question { font-size: 1.2rem; margin-bottom: 1rem; color: #333; }

    .likert-options {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .l-opt {
        flex: 1;
        padding: 10px;
        border: 1px solid #ddd;
        background: white;
        border-radius: 5px;
        cursor: pointer;
    }
    .l-opt.active { background: var(--color-eco-yellow); border-color: #dda520; font-weight: bold; }

    /* Dashboard Grid */
    .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }

    .chart-wrapper {
        position: relative;
        height: 250px;
        width: 100%;
    }

    .insight-card {
        padding: 1.5rem;
        border-radius: 8px;
        background: #fff3e0; /* Alerta suave */
        border: 1px solid #ffe0b2;
    }
    
    .insight-card.alert-variant h4 { color: #d32f2f; margin-bottom: 10px; }

    /* Intervention Cards */
    .intervention-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 1rem;
    }

    .intervention-card {
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 1.5rem;
        text-align: left;
    }

    .intervention-card.doc { background: #e8f5e9; border-top: 4px solid var(--color-eco-teal); }
    .intervention-card.fam { background: #f3e5f5; border-top: 4px solid var(--color-eco-violet); }

    .icon-header { font-size: 0.9rem; font-weight: bold; margin-bottom: 10px; opacity: 0.7; }

    .btn-action {
        background: var(--color-educate-blue);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
        font-size: 0.9rem;
    }

    @media (max-width: 768px) {
        .dashboard-grid, .intervention-container { grid-template-columns: 1fr; }
    }
</style>

<!-- SCRIPT PARA GRÁFICAS (Se ejecuta al cargar el módulo) -->
<script>
    // Configuración del Gráfico Grado 5
    // Datos extraídos del PDF: 11.5% Nunca, 29.4% A veces, 33.9% Muchas veces, 25.2% Siempre
    
    // Pequeño delay para asegurar que el Canvas exista
    setTimeout(() => {
        const ctx = document.getElementById('chartG5');
        if (ctx) {
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Nunca (11.5%)', 'A veces (29.4%)', 'Muchas veces (33.9%)', 'Siempre (25.2%)'],
                    datasets: [{
                        data: [11.5, 29.4, 33.9, 25.2],
                        backgroundColor: [
                            '#C8102E', // Rojo (Nunca/Riesgo) - Token Identidad
                            '#F3C74E', // Amarillo (A veces/Alerta)
                            '#00B5AD', // Turquesa (Muchas veces/Proceso)
                            '#17334B'  // Azul (Siempre/Consolidado)
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });
        }
    }, 300);

    // Función para cambiar pestañas
    function switchScenario(id) {
        document.getElementById('g5-view').style.display = (id === 'g5') ? 'block' : 'none';
        document.getElementById('g9-view').style.display = (id === 'g9') ? 'block' : 'none';
        
        // Actualizar botones
        document.querySelectorAll('.scenario-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }
</script>
